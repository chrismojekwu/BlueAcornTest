{{ 'cartbutton.js' | asset_url | script_tag }}
<link type="text/css" href="{{ 'featuredProducts.scss.css' | asset_url }}" rel="stylesheet">

<div id="featuredProducts">

    <div class="title">
        <h1> {{ section.settings.title-text }} </h1>
    </div>

    <div class="products">
        <ul class="featured-products-list">
            {% for product in collections[section.settings.chosen].products %}
                {% if forloop.index0 > 3 %}
                    {% break %}
                {% else %}
                    <li class="featured-list-item">
                        <a href="{{ product.url }}">
                            <img src="{{ product| img_url: '200x200' }}" alt="{{ product.description }}" class="featured-item-img">
                            <span class="featured-item-title">{{product.title}}</span>
                        </a>
                        ${{ product.price }}
                        <button class="featured-item-button" onclick="addToCart({{ product.variants[0].id }})">Add to Cart</button>
                        <div class="featured-item-button--tab"></div>
                    </li>
                {% endif %}    
            {% endfor %}
        </ul>    
  </div>
</div>
{% schema %}
  {
    "name": "Featured Products",
    "settings": [
        {
            "id": "title-text",
            "type": "text",
            "label": "Heading",
            "default": "Title"
        },
        {
            "type": "collection",
            "id": "chosen",
            "label": "Please choose a collection to feature.",
            "info": "Only the first 4 products will be displayed"   
        }
    ],
    "presets": [{
        "name": "Featured Products",
        "category": "Text/Image"
    }]
  }
{% endschema %}
